# タスク定義

本書は、REQUIREMENTS.mdおよびDESIGN.mdに基づき、実装に必要なタスクを定義する。

## 実装状況サマリー

| カテゴリ | 状況 |
|----------|------|
| 型定義 | ✅ 完了 |
| インメモリストア | ✅ 完了 |
| セッション管理 | ✅ 完了 |
| 抽選エンジン | ✅ 完了 |
| WebSocket通信 | ✅ 完了 |
| ルーティング | ✅ 完了 |
| ビュー（画面） | ✅ 完了 |
| ユニットテスト | ✅ 完了 |
| 統合テスト | ✅ 完了 |
| 負荷テスト | ✅ 完了 |
| デプロイ設定 | ✅ 完了 |

---

## フェーズ1: デプロイ準備

- [x] render.yaml作成
  - 目的: Render Blueprintによるインフラ設定の自動化
  - 詳細: DESIGN.md 12.5節に記載された設定をrender.yamlとして作成する
  - 完了条件: プロジェクトルートにrender.yamlが作成され、DESIGN.mdの仕様に準拠している

- [x] package.jsonへのbuild:cssスクリプト追加
  - 目的: 本番環境でのCSSビルドを可能にする
  - 詳細: Tailwind CSSをビルドするスクリプトを追加する
  - 完了条件: `npm run build:css`でpublic/styles.cssが生成される

- [x] 本番用ビルド設定の確認
  - 目的: Renderでのビルド・起動が正常に動作することを確認する
  - 詳細: `npm run build`および`npm start`がローカルで正常動作することを検証する
  - 完了条件: ローカル環境で本番ビルド・起動が成功し、アプリケーションが動作する

---

## フェーズ2: CI/CD設定

- [x] GitHub Actionsワークフロー作成
  - 目的: プッシュ時の自動テスト実行
  - 詳細: DESIGN.md 12.6節に記載されたワークフローを.github/workflows/deploy.ymlとして作成する
  - 完了条件: mainブランチへのプッシュ時にテストが自動実行される

---

## フェーズ3: デプロイ実行

- [ ] Renderへのデプロイ
  - 目的: アプリケーションをパブリック環境に公開する
  - 詳細: DESIGN.md 12.5節の手動設定手順に従い、Renderにデプロイする
  - 完了条件: https://{service-name}.onrender.com でアプリケーションにアクセスできる

- [ ] 本番環境での動作確認
  - 目的: デプロイしたアプリケーションが要件通りに動作することを確認する
  - 詳細: セッション作成、参加、抽選実行の一連のフローをテストする
  - 完了条件: 以下の機能が正常動作する
    - セッション作成とURL発行
    - 参加者の参加と抽選番号割当
    - 司会者認証
    - 抽選実行とリアルタイム通知
    - WebSocket接続の維持

---

## 依存関係

```
フェーズ1: デプロイ準備
  ├── render.yaml作成
  ├── package.jsonへのbuild:cssスクリプト追加
  └── 本番用ビルド設定の確認
        ↓
フェーズ2: CI/CD設定
  └── GitHub Actionsワークフロー作成
        ↓
フェーズ3: デプロイ実行
  ├── Renderへのデプロイ
  └── 本番環境での動作確認
```

---

## 次のステップ

タスクを実行するには、以下のSlash Commandを使用してください：

- 単一タスク実行: `/prj-exec-task <タスク名>`
- 連続タスク実行: `/prj-exec-tasks --until=<タスク名>`
